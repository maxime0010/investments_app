{% extends 'base.html' %}

{% block title %}Stock Performance Report{% endblock %}

{% block content %}
<div class="report-page">

    <!-- Hero Section with the stock logo -->
    <section class="hero-section" style="background-image: url('{{ stock_logo }}');">
        <div class="overlay"></div>
        <div class="overlay-text">
            <h1>{{ stock_name }} ({{ ticker }})</h1>
            <p>Comprehensive Performance Analysis & Insights</p>
        </div>
    </section>

    <!-- Main content -->
    <div class="container my-5">

        <!-- Executive Summary Section -->
        <section class="report-section">
            <h2 class="section-title">Executive Summary</h2>
            <div class="section-content">
                <p><strong>Recommendation:</strong> {{ report_data.recommendation }} <br>
                <strong>Price Target:</strong> ${{ report_data.price_target }}</p>
                <p><strong>Key Drivers:</strong></p>
                <ul>
                    {% for driver in report_data.key_drivers %}
                    <li>{{ driver }}</li>
                    {% endfor %}
                </ul>
                <p><strong>Key Risks:</strong></p>
                <ul>
                    {% for risk in report_data.key_risks %}
                    <li>{{ risk }}</li>
                    {% endfor %}
                </ul>
            </div>
        </section>

        <!-- Financial Performance Section -->
        <section class="report-section">
            <h2 class="section-title">Financial Performance</h2>
            <div class="section-content">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Revenue (Q3):</strong> ${{ financial_data.revenue_q3 | format_number }} billion</p>
                        <p><strong>Net Income (Q3):</strong> ${{ financial_data.net_income_q3 | format_number }} billion</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>EPS (Q3):</strong> ${{ financial_data.eps_q3 }}</p>
                        <p><strong>Gross Margin:</strong> {{ financial_data.gross_margin }}%</p>
                        <p><strong>Operating Margin:</strong> {{ financial_data.operating_margin }}%</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Business Segments Section -->
        <section class="report-section">
            <h2 class="section-title">Business Segments</h2>
            <div class="section-content">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Segment</th>
                            <th>Revenue (Q3)</th>
                            <th>Growth Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for segment in business_segments %}
                        <tr>
                            <td>{{ segment.name }}</td>
                            <td>${{ segment.revenue | format_number }} billion</td>
                            <td>{{ segment.growth_rate }}%</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Valuation Metrics Section -->
        <section class="report-section">
            <h2 class="section-title">Valuation Metrics</h2>
            <div class="section-content">
                <div class="row">
                    <div class="col-md-3">
                        <p><strong>P/E Ratio:</strong> {{ valuation_metrics.pe_ratio }}</p>
                    </div>
                    <div class="col-md-3">
                        <p><strong>EV/EBITDA:</strong> {{ valuation_metrics.ev_ebitda }}</p>
                    </div>
                    <div class="col-md-3">
                        <p><strong>Price/Sales Ratio:</strong> {{ valuation_metrics.price_sales_ratio }}</p>
                    </div>
                    <div class="col-md-3">
                        <p><strong>Valuation Method:</strong> {{ valuation_metrics.valuation_method }}</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Risk Factors Section -->
        <section class="report-section">
            <h2 class="section-title">Risk Factors</h2>
            <div class="section-content">
                <ul>
                    {% for risk in risk_factors %}
                    <li>{{ risk }}</li>
                    {% endfor %}
                </ul>
            </div>
        </section>

    </div>

</div>
{% endblock %}

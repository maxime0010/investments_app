{% extends "base.html" %}

{% block title %}Join the Club - Payment{% endblock %}

{% block content %}
<div class="container">
    <h1 class="my-4">Complete Your Payment</h1>
    <p>Your account has been created. Please proceed with the payment to activate your membership.</p>

    <!-- Paddle Button to trigger overlay checkout -->
    <button id="checkout-btn" class="btn btn-dark mt-4">Subscribe for $5/month</button>
</div>
{% endblock %}

{% block custom_scripts %}
<script src="https://cdn.paddle.com/paddle/paddle.js"></script>
<script>
    Paddle.Setup({ vendor: YOUR_VENDOR_ID });  // Replace with your Paddle Vendor ID

    document.getElementById('checkout-btn').addEventListener('click', function() {
        Paddle.Checkout.open({
            product: YOUR_PRODUCT_ID,  // Replace with your Paddle Product ID
            email: "{{ current_user.email }}",  // Pre-fill the user's email
            passthrough: JSON.stringify({
                user_id: "{{ current_user.id }}"  // Send the user ID as passthrough data
            })
        });
    });
</script>
{% endblock %}

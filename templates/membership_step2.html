{% extends "base.html" %}

{% block body_attributes %}
onLoad="openCheckout(monthItemsList)"
{% endblock %}

{% block title %}Join Good Life Pro - Payment{% endblock %}

{% block content %}
<div class="container text-center my-5">
    <h1 class="display-4">Complete Your Payment</h1>
    <p class="lead mt-4">Unlock premium features and start making smarter investment decisions.</p>

    <!-- Paddle checkout form will be embedded here -->
    <div class="checkout-container mt-5"></div>
</div>
{% endblock %}

{% block custom_scripts %}
<script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>
<script type="text/javascript">
    // Set the environment, can be "sandbox" or "production"
    Paddle.Environment.set("sandbox");  // Use "production" when ready to go live

    // Initialize Paddle with your client-side token
    Paddle.Initialize({
        token: "test_a5cb9a6d57e6495b160b60658fc",  // Replace with your actual client-side token
        checkout: {
            settings: {
                displayMode: "inline",  // Set display mode to inline
                frameTarget: "checkout-container",  // Match the class name of your <div>
                frameInitialHeight: "450",  // Set the initial height of the iframe
                frameStyle: "width: 100%; min-width: 312px; background-color: transparent; border: none;"
            }
        }
    });

    // Define the single item to be included in the checkout
    let monthItemsList = [
        {
            priceId: 'pri_01j64xqb3g8p5twpc9h5r0mjra',  // Replace with the actual Paddle Price ID
            quantity: 1
        }
    ];

    // Function to open the Paddle checkout with items
    function openCheckout(items) {
        Paddle.Checkout.open({
            items: items
        });
    }
</script>
{% endblock %}
